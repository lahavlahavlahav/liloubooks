<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>×œ×™×œ×• ×‘×•×§×¡ | Lilou Books | ×¡×“× ×ª ×¤×™×¡×•×œ ×¡×¤×¨×™×</title>

<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

:root {
--primary-color: #FFB6C1;
--secondary-color: #F5EFE7;
--text-color: #333;
--cream-bg: #F8F4EE;
--accent-brown: #8B6F47;
}

body {
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
line-height: 1.6;
color: var(--text-color);
background-color: var(--cream-bg);
}

.accessibility-widget {
position: fixed;
bottom: 20px;
left: 20px;
z-index: 9999;
}

.accessibility-toggle-btn {
width: 60px;
height: 60px;
border-radius: 50%;
background: linear-gradient(135deg, #0066cc, #004999);
border: none;
cursor: pointer;
box-shadow: 0 4px 12px rgba(0, 102, 204, 0.4);
display: flex;
align-items: center;
justify-content: center;
transition: all 0.3s ease;
}

.accessibility-toggle-btn:hover {
transform: scale(1.1);
}

.accessibility-icon {
width: 32px;
height: 32px;
color: white;
}

.accessibility-panel {
position: absolute;
bottom: 70px;
left: 0;
background: white;
border-radius: 15px;
box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
padding: 1.5rem;
min-width: 280px;
opacity: 0;
visibility: hidden;
transform: translateY(10px);
transition: all 0.3s ease;
}

.accessibility-panel.active {
opacity: 1;
visibility: visible;
transform: translateY(0);
}

.accessibility-panel h3 {
color: #0066cc;
font-size: 1.2rem;
margin-bottom: 1rem;
text-align: center;
border-bottom: 2px solid #0066cc;
padding-bottom: 0.5rem;
}

.accessibility-controls {
display: flex;
flex-direction: column;
gap: 0.8rem;
}

.accessibility-btn {
background: #f0f0f0;
border: 2px solid #ddd;
padding: 0.8rem 1rem;
border-radius: 8px;
cursor: pointer;
font-size: 0.95rem;
font-weight: 600;
transition: all 0.3s;
}

.accessibility-btn:hover {
background: #0066cc;
color: white;
border-color: #0066cc;
}

.accessibility-btn.active {
background: #0066cc;
color: white;
border-color: #0066cc;
}

header {
background: white;
box-shadow: 0 2px 10px rgba(0,0,0,0.1);
position: sticky;
top: 0;
z-index: 1000;
}

nav {
max-width: 1200px;
margin: 0 auto;
padding: 1rem 2rem;
display: flex;
justify-content: space-between;
align-items: center;
}

.logo img {
height: 50px;
width: auto;
}

.nav-links {
display: flex;
gap: 2rem;
list-style: none;
}

.nav-links a {
text-decoration: none;
color: var(--text-color);
font-weight: 500;
transition: color 0.3s;
}

.nav-links a:hover {
color: var(--primary-color);
}

.menu-toggle {
display: none;
flex-direction: column;
cursor: pointer;
}

.menu-toggle span {
width: 25px;
height: 3px;
background: var(--text-color);
margin: 3px 0;
}

.hero {
background: linear-gradient(135deg, var(--secondary-color) 0%, var(--cream-bg) 100%);
padding: 4rem 2rem;
text-align: center;
}

.hero h1 {
font-size: 2.5rem;
color: var(--accent-brown);
margin-bottom: 1rem;
}

.hero p {
font-size: 1.2rem;
color: #666;
max-width: 800px;
margin: 0 auto 2rem;
}

.cta-button {
display: inline-block;
background: var(--primary-color);
color: white;
padding: 1rem 2.5rem;
border-radius: 50px;
text-decoration: none;
font-weight: bold;
transition: transform 0.3s;
border: none;
cursor: pointer;
font-size: 1rem;
}

.cta-button:hover {
transform: translateY(-2px);
box-shadow: 0 5px 15px rgba(255, 182, 193, 0.4);
}

.container {
max-width: 1200px;
margin: 0 auto;
padding: 3rem 2rem;
}

section {
margin-bottom: 4rem;
}

h2 {
font-size: 2rem;
color: var(--accent-brown);
margin-bottom: 2rem;
text-align: center;
position: relative;
padding-bottom: 1rem;
}

h2::after {
content: '';
position: absolute;
bottom: 0;
right: 50%;
transform: translateX(50%);
width: 80px;
height: 3px;
background: var(--primary-color);
}

.services-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
gap: 1.5rem;
margin-top: 2rem;
}

.service-card {
background: white;
padding: 1.5rem;
border-radius: 15px;
box-shadow: 0 4px 15px rgba(0,0,0,0.1);
text-align: center;
transition: transform 0.3s;
border: 3px solid var(--primary-color);
}

.service-card:hover {
transform: translateY(-5px);
}

.service-icon {
font-size: 3rem;
margin-bottom: 1rem;
}

.service-card .price {
font-size: 1.5rem;
color: var(--primary-color);
font-weight: bold;
margin: 1rem 0;
}

.pattern-generator-section {
background: white;
border-radius: 20px;
padding: 3rem;
box-shadow: 0 5px 20px rgba(0,0,0,0.1);
margin: 4rem auto;
}

.pattern-grid {
display: grid;
grid-template-columns: 350px 1fr;
gap: 2rem;
margin-top: 2rem;
}

.upload-panel {
background: var(--cream-bg);
border-radius: 15px;
padding: 2rem;
}

.upload-area {
border: 3px dashed var(--primary-color);
border-radius: 15px;
padding: 2rem;
text-align: center;
cursor: pointer;
transition: all 0.3s;
margin-bottom: 1.5rem;
}

.upload-area:hover {
background: var(--secondary-color);
}

.settings-group {
margin-bottom: 1.5rem;
}

.settings-group label {
display: block;
font-weight: 600;
color: var(--accent-brown);
margin-bottom: 0.5rem;
font-size: 0.9rem;
}

.settings-group input,
.settings-group select {
width: 100%;
padding: 0.7rem;
border: 2px solid #ddd;
border-radius: 8px;
font-size: 0.95rem;
}

.pattern-display {
background: var(--secondary-color);
border-radius: 15px;
padding: 2rem;
min-height: 400px;
display: flex;
flex-direction: column;
}

.pattern-canvas {
border: 2px solid #ddd;
border-radius: 10px;
max-width: 100%;
background: white;
}

.empty-state {
text-align: center;
color: #999;
padding: 3rem;
}

.subscription-overlay {
position: fixed;
top: 0;
left: 0;
right: 0;
bottom: 0;
background: rgba(0,0,0,0.8);
display: none;
align-items: center;
justify-content: center;
z-index: 10000;
}

.subscription-overlay.active {
display: flex;
}

.subscription-modal {
background: white;
border-radius: 20px;
padding: 3rem;
max-width: 700px;
width: 90%;
text-align: center;
position: relative;
}

.close-modal {
position: absolute;
top: 1rem;
left: 1rem;
background: none;
border: none;
font-size: 2rem;
cursor: pointer;
color: #999;
}

.subscription-options {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 1.5rem;
margin-top: 2rem;
}

.subscription-card {
background: var(--cream-bg);
border: 3px solid var(--primary-color);
border-radius: 15px;
padding: 2rem;
cursor: pointer;
transition: all 0.3s;
position: relative;
}

.subscription-card:hover {
transform: translateY(-5px);
}

.subscription-card .price {
font-size: 2.5rem;
color: var(--primary-color);
font-weight: bold;
margin: 1rem 0;
}

.subscribe-btn {
background: var(--primary-color);
color: white;
border: none;
padding: 1rem 2rem;
border-radius: 50px;
font-size: 1.1rem;
font-weight: 600;
cursor: pointer;
width: 100%;
transition: all 0.3s;
}

.subscribe-btn:hover {
transform: translateY(-2px);
}

.faq-container {
max-width: 800px;
margin: 2rem auto;
}

.faq-item {
background: white;
margin-bottom: 1rem;
border-radius: 10px;
overflow: hidden;
box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.faq-question {
padding: 1.5rem;
cursor: pointer;
font-weight: bold;
color: var(--accent-brown);
display: flex;
justify-content: space-between;
}

.faq-question:hover {
background: var(--secondary-color);
}

.faq-answer {
padding: 0 1.5rem;
max-height: 0;
overflow: hidden;
transition: max-height 0.3s ease, padding 0.3s ease;
}

.faq-item.active .faq-answer {
padding: 1.5rem;
max-height: 500px;
}

.contact-section {
background: white;
border-radius: 20px;
padding: 3rem;
box-shadow: 0 5px 20px rgba(0,0,0,0.1);
max-width: 900px;
margin: 0 auto;
}

.contact-info {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
gap: 2rem;
margin-bottom: 2rem;
}

.contact-item {
text-align: center;
padding: 1.5rem;
background: var(--secondary-color);
border-radius: 10px;
}

.form-group {
margin-bottom: 1.5rem;
}

.form-group label {
display: block;
margin-bottom: 0.5rem;
color: var(--accent-brown);
font-weight: 500;
}

.form-group input,
.form-group textarea,
.form-group select {
width: 100%;
padding: 0.8rem;
border: 2px solid #ddd;
border-radius: 8px;
font-size: 1rem;
}

.form-group textarea {
min-height: 120px;
resize: vertical;
}

footer {
background: var(--accent-brown);
color: white;
padding: 3rem 2rem 1rem;
text-align: center;
}

.footer-content {
max-width: 1200px;
margin: 0 auto;
display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
gap: 2rem;
margin-bottom: 2rem;
}

.copyright {
border-top: 1px solid rgba(255,255,255,0.2);
padding-top: 1rem;
margin-top: 2rem;
}

@media (max-width: 968px) {
.pattern-grid {
grid-template-columns: 1fr;
}

.subscription-options {
grid-template-columns: 1fr;
}

.menu-toggle {
display: flex;
}

.nav-links {
position: absolute;
top: 100%;
right: 0;
background: white;
flex-direction: column;
width: 100%;
padding: 2rem;
display: none;
}

.nav-links.active {
display: flex;
}
}
</style>
</head>
<body>

<div class="accessibility-widget">
<button class="accessibility-toggle-btn" id="accessibilityToggle">
<svg class="accessibility-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<circle cx="12" cy="5" r="2"/>
<path d="M12 7v10"/>
<path d="M7 11l5-2 5 2"/>
<path d="M7 17l5-3 5 3"/>
</svg>
</button>

<div class="accessibility-panel" id="accessibilityPanel">
<h3>× ×’×™×©×•×ª</h3>
<div class="accessibility-controls">
<button class="accessibility-btn" id="increaseFontBtn">ğŸ”+ ×”×’×“×œ ×˜×§×¡×˜</button>
<button class="accessibility-btn" id="decreaseFontBtn">ğŸ”- ×”×§×˜×Ÿ ×˜×§×¡×˜</button>
<button class="accessibility-btn" id="contrastBtn">âš«âšª × ×™×’×•×“×™×•×ª ×’×‘×•×”×”</button>
<button class="accessibility-btn" id="resetBtn">ğŸ”„ ××™×¤×•×¡</button>
</div>
</div>
</div>

<header>
<nav>
<a href="#home" style="text-decoration: none;">
<div class="logo">
<img src="Screenshot%202025-10-06%20at%209.01.46.png" alt="Lilou Books">
</div>
</a>
<ul class="nav-links" id="navLinks">
<li><a href="#home">×‘×™×ª</a></li>
<li><a href="#about">××•×“×•×ª</a></li>
<li><a href="#workshops">×¡×“× ××•×ª</a></li>
<li><a href="#pattern-generator">××—×•×œ×œ ×ª×‘× ×™×•×ª</a></li>
<li><a href="#faq">×©××œ×•×ª × ×¤×•×¦×•×ª</a></li>
<li><a href="#contact">×¦×•×¨ ×§×©×¨</a></li>
</ul>
<div class="menu-toggle" id="menuToggle">
<span></span>
<span></span>
<span></span>
</div>
</nav>
</header>

<section class="hero" id="home">
<div class="container">
<h1>××× ×•×ª ×¤×™×¡×•×œ ×•×§×™×¤×•×œ ×¡×¤×¨×™×</h1>
<p>×’×œ×• ××ª ×”×¢×•×œ× ×”×§×¡×•× ×©×œ ×¤×™×¡×•×œ ×¡×¤×¨×™× - ×¡×“× ××•×ª ×§×™×¤×•×œ ×¡×¤×¨×™× ×—×•×•×™×™×ª×™×•×ª, ×™×¦×™×¨×ª ×¡×¤×¨ ××§×•×¤×œ ×‘×”×ª×××” ××™×©×™×ª ×•××ª× ×•×ª ×™×™×—×•×“×™×•×ª ×©××©××™×¨×•×ª ×—×•×ª×.</p>
<a href="#contact" class="cta-button">×”×–××™× ×• ×¡×“× ×” ×¢×›×©×™×•</a>
</div>
</section>

<section class="container" id="about">
<h2>××•×“×•×ª Lilou Books</h2>
<div style="max-width: 900px; margin: 0 auto;">
<div style="background: white; padding: 2.5rem; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
<p style="font-size: 1.1rem; line-height: 1.8; color: #666;">
×œ×”×‘ ×‘×¨×§ - ××•×× ×™×ª ×•×× ×—×ª ×¡×“× ××•×ª ×¤×™×¡×•×œ ×•×§×™×¤×•×œ ×¡×¤×¨×™×. ×”×›×œ ×”×ª×—×™×œ ×›×ª×—×‘×™×‘ ×‘×¦×¨×¤×ª, ×•×”×¤×š ×œ×¢×¡×§ ××©×’×©×’ ×©××‘×™× ×©××—×” ×•×™×¦×™×¨×ª×™×•×ª ×œ××œ×¤×™ ×× ×©×™×.
</p>
</div>
</div>
</section>

<section class="container" id="workshops">
<h2>×¡×“× ××•×ª ×¤×™×¡×•×œ ×•×§×™×¤×•×œ ×¡×¤×¨×™×</h2>
<div class="services-grid">
<div class="service-card">
<div class="service-icon">ğŸ’•</div>
<h3>×¡×“× ×” ×¤×¨×˜×™×ª</h3>
<p>6-12 ××©×ª×ª×¤×™×</p>
<div class="price">â‚ª240 ×œ××©×ª×ª×£</div>
</div>

<div class="service-card">
<div class="service-icon">ğŸ¨</div>
<h3>×¡×“× ×” ×§×‘×•×¦×ª×™×ª</h3>
<p>××¤×’×©×™× ×§×‘×•×¢×™×</p>
<div class="price">â‚ª220 ×œ××©×ª×ª×£</div>
</div>

<div class="service-card">
<div class="service-icon">ğŸ‘¥</div>
<h3>×¡×“× ×ª ×’×™×‘×•×©</h3>
<p>×¢×“ 30 ××©×ª×ª×¤×™×</p>
<div class="price">××—×™×¨ ××™×•×—×“</div>
</div>
</div>
</section>

<section class="container" id="pattern-generator">
<div class="pattern-generator-section">
<h2>ğŸ¨ ××—×•×œ×œ ×ª×‘× ×™×•×ª ×§×™×¤×•×œ ×¡×¤×¨×™×</h2>
<p style="text-align: center; color: #666; margin-bottom: 2rem;">
×”×¢×œ×• ×ª××•× ×” ×•×”×¤×›×• ××•×ª×” ×œ×ª×‘× ×™×ª ×§×™×¤×•×œ ×¡×¤×¨×™× ××§×¦×•×¢×™×ª! ×× ×•×™ ×—×•×“×©×™/×©× ×ª×™ ×œ×ª×‘× ×™×•×ª ×œ×œ× ×”×’×‘×œ×”.
</p>

<div class="pattern-grid">
<div class="upload-panel">
<h3 style="font-size: 1.2rem; margin-bottom: 1.5rem;">×”×¢×œ××ª ×ª××•× ×”</h3>
<div class="upload-area" id="uploadArea">
<div style="font-size: 3rem;">ğŸ“¸</div>
<p><strong>×œ×—×¦×• ×œ×”×¢×œ××”</strong></p>
<input type="file" id="imageInput" accept="image/*" style="display: none;">
</div>

<div class="settings-group">
<label>××¡×¤×¨ ×¢××•×“×™×</label>
<input type="number" id="pages" value="300" min="50" max="1000">
</div>

<div class="settings-group">
<label>×’×•×‘×” ×¡×¤×¨ (×¡"×)</label>
<input type="number" id="bookHeight" value="21.0" step="0.1">
</div>

<div class="settings-group">
<label>×¨×’×™×©×•×ª: <span id="thresholdValue">128</span></label>
<input type="range" id="threshold" min="0" max="255" value="128">
</div>
</div>

<div class="pattern-display">
<div id="emptyState" class="empty-state">
<div style="font-size: 4rem;">ğŸ“–</div>
<p>×”×¢×œ×• ×ª××•× ×” ×›×“×™ ×œ×™×¦×•×¨ ×ª×‘× ×™×ª</p>
</div>

<div id="canvasContainer" style="display: none;">
<canvas id="patternCanvas" class="pattern-canvas"></canvas>
<div style="margin-top: 1.5rem; text-align: center;">
<button class="cta-button" id="downloadBtn">â¬‡ï¸ ×”×•×¨×™×“×• ×ª×‘× ×™×ª ××œ××”</button>
<p style="margin-top: 0.5rem; font-size: 0.9rem; color: #666;">×“×•×¨×© ×× ×•×™ ×—×•×“×©×™/×©× ×ª×™</p>
</div>
</div>
</div>
</div>
</div>
</section>

<div class="subscription-overlay" id="subscriptionOverlay">
<div class="subscription-modal">
<button class="close-modal" id="closeModal">Ã—</button>
<h2 style="color: var(--accent-brown);">ğŸ ×”×¦×˜×¨×¤×• ×œ×× ×•×™</h2>
<p style="color: #666; margin-bottom: 2rem;">×§×‘×œ×• ×’×™×©×” ××œ××” ×œ××—×•×œ×œ ×ª×‘× ×™×•×ª!</p>

<div class="subscription-options">
<div class="subscription-card">
<h3>×× ×•×™ ×—×•×“×©×™</h3>
<div class="price">â‚¬12</div>
<p style="color: #666;">×œ×—×•×“×©</p>
<button class="subscribe-btn" onclick="window.open('https://pay.grow.link/754dc8226e8d3c2379738c73eac9aeb9-Mjc1NDQ4Mw', '_blank')">×”×¦×˜×¨×¤×• ×¢×›×©×™×•</button>
</div>

<div class="subscription-card" style="border-color: var(--accent-brown);">
<h3>×× ×•×™ ×©× ×ª×™</h3>
<div class="price">â‚¬89</div>
<p style="color: #666;">×œ×©× ×” - ×—×¡×›×• â‚¬55!</p>
<button class="subscribe-btn" onclick="window.open('https://pay.grow.link/754dc8226e8d3c2379738c73eac9aeb9-Mjc1NDQ4Mw', '_blank')">×”×¦×˜×¨×¤×• ×¢×›×©×™×•</button>
</div>
</div>
</div>
</div>

<section class="container" id="faq">
<h2>×©××œ×•×ª × ×¤×•×¦×•×ª</h2>
<div class="faq-container">
<div class="faq-item">
<div class="faq-question">
××” ×–×” ×¤×™×¡×•×œ ×¡×¤×¨×™×?
<span class="faq-icon">+</span>
</div>
<div class="faq-answer">
<p>×¤×™×¡×•×œ ×¡×¤×¨×™× ×”×•× ××× ×•×ª ×©×œ ×§×™×¤×•×œ ×“×¤×™ ×¡×¤×¨ ×œ×™×¦×™×¨×ª ×¦×•×¨×•×ª ×•×ª×‘×œ×™×˜×™× ×ª×œ×ª-××™××“×™×™×.</p>
</div>
</div>
</div>
</section>

<section class="container" id="contact">
<h2>×¦×¨×• ×§×©×¨</h2>
<div class="contact-section">
<div class="contact-info">
<div class="contact-item">
<div style="font-size: 2.5rem; margin-bottom: 1rem;">ğŸ“±</div>
<h3>×˜×œ×¤×•×Ÿ / ×•×•××˜×¡××¤</h3>
<a href="https://wa.me/972502534643" target="_blank" style="display: inline-block; background: #25D366; color: white; padding: 0.8rem 1.5rem; border-radius: 50px; text-decoration: none; font-weight: 600; margin: 0.5rem 0;">×©×œ×—×• ×”×•×“×¢×”</a>
<p>050-253-4643</p>
</div>

<div class="contact-item">
<div style="font-size: 2.5rem; margin-bottom: 1rem;">ğŸ“§</div>
<h3>××™××™×™×œ</h3>
<a href="mailto:liloubooks.com@gmail.com" style="color: var(--accent-brown); text-decoration: none;">liloubooks.com@gmail.com</a>
</div>

<div class="contact-item">
<div style="font-size: 2.5rem; margin-bottom: 1rem;">ğŸ“</div>
<h3>××™×§×•×</h3>
<p>×ª×œ ××‘×™×‘, ×™×©×¨××œ</p>
</div>
</div>

<form action="https://formspree.io/f/mzzjvvqv" method="POST">
<div class="form-group">
<label>×©× ××œ× *</label>
<input type="text" name="name" required>
</div>

<div class="form-group">
<label>××™××™×™×œ *</label>
<input type="email" name="email" required>
</div>

<div class="form-group">
<label>×˜×œ×¤×•×Ÿ *</label>
<input type="tel" name="phone" required>
</div>

<div class="form-group">
<label>×¡×•×’ ×”×©×™×¨×•×ª *</label>
<select name="service" required>
<option value="">×‘×—×¨×• ×¡×•×’ ×©×™×¨×•×ª</option>
<option value="×¡×¤×¨ ××§×•×¤×œ">ğŸ ×”×–×× ×ª ×¡×¤×¨ ××§×•×¤×œ</option>
<option value="×¡×“× ×”">ğŸ’• ×¡×“× ×”</option>
<option value="×× ×•×™">ğŸ¨ ×× ×•×™ ×œ××—×•×œ×œ ×ª×‘× ×™×•×ª</option>
<option value="××—×¨">ğŸ’¬ ××—×¨</option>
</select>
</div>

<div class="form-group">
<label>×”×•×“×¢×” *</label>
<textarea name="message" required></textarea>
</div>

<button type="submit" class="cta-button" style="width: 100%;">×©×œ×—×• ×”×•×“×¢×” ğŸ’Œ</button>
</form>
</div>
</section>

<footer>
<div class="footer-content">
<div>
<h3 style="color: var(--primary-color);">Lilou Books</h3>
<p>×¡×“× ××•×ª ×¤×™×¡×•×œ ×•×§×™×¤×•×œ ×¡×¤×¨×™×</p>
</div>

<div>
<h3 style="color: var(--primary-color);">×§×™×©×•×¨×™×</h3>
<a href="#workshops" style="color: white; text-decoration: none; display: block; margin-bottom: 0.5rem;">×¡×“× ××•×ª</a>
<a href="#pattern-generator" style="color: white; text-decoration: none; display: block;">××—×•×œ×œ ×ª×‘× ×™×•×ª</a>
</div>
</div>

<div class="copyright">
<p>&copy; 2025 Lilou Books</p>
</div>
</footer>

<canvas id="hiddenCanvas" style="display: none;"></canvas>

<script>
document.addEventListener('DOMContentLoaded', function() {
const accessibilityToggle = document.getElementById('accessibilityToggle');
const accessibilityPanel = document.getElementById('accessibilityPanel');

accessibilityToggle.addEventListener('click', function(e) {
e.stopPropagation();
accessibilityPanel.classList.toggle('active');
});

document.addEventListener('click', function(e) {
if (!e.target.closest('.accessibility-widget')) {
accessibilityPanel.classList.remove('active');
}
});

let currentFontSize = 1;
document.getElementById('increaseFontBtn').addEventListener('click', function() {
currentFontSize = Math.min(currentFontSize + 0.1, 1.4);
document.body.style.fontSize = currentFontSize + 'em';
});

document.getElementById('decreaseFontBtn').addEventListener('click', function() {
currentFontSize = Math.max(currentFontSize - 0.1, 1);
document.body.style.fontSize = currentFontSize + 'em';
});

document.getElementById('contrastBtn').addEventListener('click', function() {
document.body.style.filter = document.body.style.filter === 'contrast(1.5)' ? 'none' : 'contrast(1.5)';
this.classList.toggle('active');
});

document.getElementById('resetBtn').addEventListener('click', function() {
currentFontSize = 1;
document.body.style.fontSize = '1em';
document.body.style.filter = 'none';
document.getElementById('contrastBtn').classList.remove('active');
});

const menuToggle = document.getElementById('menuToggle');
const navLinks = document.getElementById('navLinks');
menuToggle.addEventListener('click', function() {
navLinks.classList.toggle('active');
});

document.querySelectorAll('.faq-item').forEach(function(item) {
const question = item.querySelector('.faq-question');
question.addEventListener('click', function() {
const wasActive = item.classList.contains('active');
document.querySelectorAll('.faq-item').forEach(function(otherItem) {
otherItem.classList.remove('active');
});
if (!wasActive) {
item.classList.add('active');
}
});
});

document.querySelectorAll('a[href^="#"]').forEach(function(anchor) {
anchor.addEventListener('click', function(e) {
e.preventDefault();
const target = document.querySelector(this.getAttribute('href'));
if (target) {
target.scrollIntoView({ behavior: 'smooth' });
}
});
});

let currentImage = null;
let currentPattern = null;

const imageInput = document.getElementById('imageInput');
const uploadArea = document.getElementById('uploadArea');
const patternCanvas = document.getElementById('patternCanvas');
const hiddenCanvas = document.getElementById('hiddenCanvas');
const emptyState = document.getElementById('emptyState');
const canvasContainer = document.getElementById('canvasContainer');
const downloadBtn = document.getElementById('downloadBtn');
const subscriptionOverlay = document.getElementById('subscriptionOverlay');
const closeModal = document.getElementById('closeModal');

uploadArea.addEventListener('click', function() {
imageInput.click();
});

document.getElementById('threshold').addEventListener('input', function(e) {
document.getElementById('thresholdValue').textContent = e.target.value;
if (currentImage) generatePattern();
});

['pages', 'bookHeight'].forEach(function(id) {
document.getElementById(id).addEventListener('change', function() {
if (currentImage) generatePattern();
});
});

imageInput.addEventListener('change', function(e) {
const file = e.target.files[0];
if (file) {
const reader = new FileReader();
reader.onload = function(event) {
const img = new Image();
img.onload = function() {
currentImage = img;
generatePattern();
};
img.src = event.target.result;
};
reader.readAsDataURL(file);
}
});

function generatePattern() {
const ctx = hiddenCanvas.getContext('2d');
const pages = parseInt(document.getElementById('pages').value);
const bookHeight = parseFloat(document.getElementById('bookHeight').value);
const threshold = parseInt(document.getElementById('threshold').value);

hiddenCanvas.width = pages;
hiddenCanvas.height = 200;

ctx.fillStyle = 'white';
ctx.fillRect(0, 0, hiddenCanvas.width, hiddenCanvas.height);
ctx.drawImage(currentImage, 0, 0, hiddenCanvas.width, hiddenCanvas.height);

const imageData = ctx.getImageData(0, 0, hiddenCanvas.width, hiddenCanvas.height);
const pattern = [];

for (let x = 0; x < hiddenCanvas.width; x++) {
const pageFolds = [];
let inRegion = false;
let regionStart = 0;

for (let y = 0; y < hiddenCanvas.height; y++) {
const idx = (y * hiddenCanvas.width + x) * 4;
const gray = 0.299 * imageData.data[idx] + 0.587 * imageData.data[idx + 1] + 0.114 * imageData.data[idx + 2];
const shouldMark = gray < threshold;

if (shouldMark && !inRegion) {
regionStart = y;
inRegion = true;
} else if (!shouldMark && inRegion) {
const top = (regionStart / hiddenCanvas.height) * bookHeight;
const bottom = (y / hiddenCanvas.height) * bookHeight;
pageFolds.push({ top: top.toFixed(2), bottom: bottom.toFixed(2) });
inRegion = false;
}
}

if (inRegion) {
const top = (regionStart / hiddenCanvas.height) * bookHeight;
pageFolds.push({ top: top.toFixed(2), bottom: bookHeight.toFixed(2) });
}

pattern.push({ page: x + 1, folds: pageFolds });
}

currentPattern = pattern;
drawPattern();
}

function drawPattern() {
const ctx = patternCanvas.getContext('2d');
const bookHeight = parseFloat(document.getElementById('bookHeight').value);
const width = Math.min(700, currentPattern.length * 2);
const height = 400;

patternCanvas.width = width;
patternCanvas.height = height;

ctx.fillStyle = 'white';
ctx.fillRect(0, 0, width, height);

const pageWidth = width / currentPattern.length;

currentPattern.forEach(function(page, idx) {
const x = idx * pageWidth;

ctx.strokeStyle = '#e5e7eb';
ctx.lineWidth = 0.5;
ctx.beginPath();
ctx.moveTo(x, 0);
ctx.lineTo(x, height);
ctx.stroke();

page.folds.forEach(function(fold) {
const top = (parseFloat(fold.top) / bookHeight) * height;
const bottom = (parseFloat(fold.bottom) / bookHeight) * height;

ctx.fillStyle = '#1f2937';
ctx.fillRect(x, top, pageWidth, bottom - top);
});
});

emptyState.style.display = 'none';
canvasContainer.style.display = 'block';
}

downloadBtn.addEventListener('click', function() {
subscriptionOverlay.classList.add('active');
});

closeModal.addEventListener('click', function() {
subscriptionOverlay.classList.remove('active');
});

subscriptionOverlay.addEventListener('click', function(e) {
if (e.target === subscriptionOverlay) {
subscriptionOverlay.classList.remove('active');
}
});
});
</script>
</body>
</html>
